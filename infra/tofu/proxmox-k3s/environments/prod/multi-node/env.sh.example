#!/bin/bash
# Environment variables for prod multi-node deployment
# Copy this file to env.sh and fill in your actual values
# Usage: source env.sh

# Terraform state backend
export TF_STATE_CONN_STR="postgres://USER:PASSWORD@192.168.68.120:5432/tofu_state?sslmode=disable"

# Proxmox Cluster 1 (server + agent-01)
export PROXMOX_ENDPOINT_CLUSTER1="https://proxmox3.jimmylab.duckdns.org/api2/json"
export PROXMOX_USERNAME_CLUSTER1="root@pam!tofu"
export PROXMOX_PASSWORD_CLUSTER1="YOUR_CLUSTER1_PASSWORD"
export PROXMOX_NODE_CLUSTER1="n100r"

# Proxmox Cluster 2 (agent-02)
export PROXMOX_ENDPOINT_CLUSTER2="https://proxmox.jimmylab.duckdns.org/api2/json"
export PROXMOX_USERNAME_CLUSTER2="root@pam!tofu"
export PROXMOX_PASSWORD_CLUSTER2="YOUR_CLUSTER2_PASSWORD"
export PROXMOX_NODE_CLUSTER2="shiro"

# Generic Proxmox config (fallback)
export PROXMOX_ENDPOINT="$PROXMOX_ENDPOINT_CLUSTER1"
export PROXMOX_USERNAME="$PROXMOX_USERNAME_CLUSTER1"
export PROXMOX_PASSWORD="$PROXMOX_PASSWORD_CLUSTER1"
export PROXMOX_NODE="$PROXMOX_NODE_CLUSTER1"
export PROXMOX_TLS_INSECURE="true"
export PROXMOX_TIMEOUT="300"

# SSH configuration
export SSH_PUBLIC_KEY="$(cat ~/.ssh/id_ed25519.pub)"  # Or your key path
export SSH_USERNAME="jimmy"
export SSH_PRIVATE_KEY_PATH="~/.ssh/home_server"

# Network configuration
export NETWORK_GATEWAY="192.168.68.1"
export NETWORK_NAMESERVER="8.8.8.8"
export NETWORK_NAMESERVER_2="1.1.1.1"
export NETWORK_DOMAIN="local"
export NETWORK_INTERFACE="eth0"

# K3s configuration (required for prod)
export K3S_VERSION="v1.28.2+k3s1"
export K3S_TOKEN="YOUR_K3S_TOKEN"  # Generate with: openssl rand -hex 32
export K3S_INSTALL_EXEC="--disable=traefik --disable=servicelb"

echo "Environment variables loaded for prod/multi-node"
